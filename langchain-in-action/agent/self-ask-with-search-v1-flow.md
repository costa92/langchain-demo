# 流程图：自助查询代理实现

## 流程概述
本文档描述了一个自助查询代理的实现流程，该代理结合了OpenAI的语言模型和SerpAPI搜索工具，用于处理和回答用户的查询请求。

## 详细步骤

1. **环境变量读取**
   - 读取 `OPENAI_API_KEY` 以用于API调用认证。

2. **模型和API配置**
   - 设置模型名称：`Qwen/Qwen2.5-7B-Instruct`，这是一个预训练的语言模型，专门用于指令型任务。
   - 设置API基础URL：`https://api.siliconflow.cn/v1`，这是API服务的基础访问地址。

3. **搜索工具初始化**
   - 初始化 `SerpAPIWrapper`，这是一个封装了SerpAPI的类，用于执行网络搜索。

4. **工具配置**
   - 配置工具名称：`Intermediate Answer`，这个名称用于标识工具的功能。
   - 配置工具功能：执行搜索，用于增强语言模型的回答能力。

5. **提示获取**
   - 从LangChain Hub拉取提示：`hwchase17/self-ask-with-search`，这些提示用于指导语言模型如何更好地利用搜索结果。

6. **代理构建**
   - 使用语言模型、工具和提示构建自助查询代理。这一步骤涉及到将模型、工具和提示整合，形成一个能够自动处理查询的代理。

7. **代理执行器配置**
   - 设置错误处理、迭代次数、执行时间等参数。这些配置项确保代理在执行过程中能够有效地处理错误，以及按照预定的迭代次数和时间限制运行。

8. **代理调用**
   - 处理输入问题：`使用玫瑰作为国花的国家的首都是哪里?`，这是一个示例查询，用于展示代理的处理能力。
   - 输出结果：代理将输出处理后的答案，这个答案是通过语言模型生成并结合搜索结果优化的。

## 结论

通过以上步骤，我们构建了一个能够自动处理和回答用户查询的智能代理。这个代理结合了先进的语言模型和搜索技术，能够提供准确和详细的回答。

## 合适什么样的场景：
解决多跳问题，即需要多步推理或多次查询才能得到最终答案的问题